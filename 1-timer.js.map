{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet userSelectedDate = null;\n  \nflatpickr(\"input#datetime-picker\", {\n  enableTime: true,   \n  time_24hr: true,    \n  defaultDate: new Date(),    \n  minuteIncrement: 1,\n  enableSeconds: true,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];      \n    \n    if (userSelectedDate <= Date.now()) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please choose a date in the future',\n        position: 'topRight',\n      });\n      button.disabled = true;\n      button.classList.add(\"disabled-button\");\n      return;\n    }\n    button.disabled = false;\n    button.classList.remove(\"disabled-button\");\n  },\n  \n});\n\nconst button = document.querySelector(\"button\");\nconst input = document.querySelector(\"#datetime-picker\");\n\ninput.disabled = false;\nbutton.disabled = false;\n\nconst fDays = document.querySelector(\"span[data-days]\");\nconst fHours = document.querySelector(\"span[data-hours]\");\nconst fMinutes = document.querySelector(\"span[data-minutes]\");\nconst fSeconds = document.querySelector(\"span[data-seconds]\");\n\nclass Timer {\n\n  constructor({onTick}) {\n    this.onTick = onTick;\n    this.isActive = false;\n    this.init(); \n    this.intervalID = null;\n  }\n\n  init() {\n    const time = this.convertMs(0);\n    this.onTick(time);\n  }\n  start() {   \n    \n    if (this.isActive) {      \n      button.disabled = true;\n      input.disabled = true;\n      button.classList.add(\"disabled-button\");\n      \n      return;\n      \n    }\n    this.isActive = true;    \n    this.intervalID = setInterval(() => {\n      button.disabled = true;\n      input.disabled = true;\n      button.classList.add(\"disabled-button\");\n      const currentTime = Date.now(); // Поточний час      \n      const deltaTime = userSelectedDate - currentTime; // Скільки часу пройшло\n      if (deltaTime <= 0) {\n        clearInterval(this.intervalID); // зупинка відліку\n        this.init(); // скидання до 00        \n        this.isActive = false; // активування кнопки для повторного запуску \n        button.disabled = false;\n        input.disabled = false;\n        button.classList.remove(\"disabled-button\");\n        return;\n      }\n      const time = this.convertMs(deltaTime) // вивидить час з відліком\n      this.onTick(time);\n\n    }, 1000);\n  };  \n\n  convertMs(ms) {    \n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n    \n    // Remaining days\n    const days = this.addLeadingZero(Math.floor(ms / day));\n    // Remaining hours\n    const hours = this.addLeadingZero(Math.floor((ms % day) / hour));\n    // Remaining minutes\n    const minutes = this.addLeadingZero(Math.floor(((ms % day) % hour) / minute));\n    // Remaining seconds\n    const seconds = this.addLeadingZero(Math.floor((((ms % day) % hour) % minute) / second));\n    return { days, hours, minutes, seconds };\n  }\n  addLeadingZero(value) {\n    return String(value).padStart(2, \"0\"); // додаємо парний нуль\n  }\n}\n  \nconst time = new Timer({onTick: updateTimeFace});\nbutton.addEventListener(\"click\", time.start.bind(time));\n\n\nfunction updateTimeFace({ days, hours, minutes, seconds }) {\n  fDays.textContent = `${days}`;\n  fHours.textContent = `${hours}`;\n  fMinutes.textContent = `${minutes}`;\n  fSeconds.textContent = `${seconds}`;\n\n  \n}\n\n\n\n\n\n\n\n\n\n// import flatpickr from \"flatpickr\";\n// // Додатковий імпорт стилів\n// import \"flatpickr/dist/flatpickr.min.css\";\n\n// import iziToast from \"izitoast\";\n// // Додатковий імпорт стилів\n// import \"izitoast/dist/css/iziToast.min.css\";\n\n\n// let userSelectedDate = null;\n  \n// flatpickr(\"input#datetime-picker\", {\n//   enableTime: true,   \n//   time_24hr: true,    \n//   defaultDate: new Date(),    \n//   minuteIncrement: 1,\n//   enableSeconds: true,\n//   // minDate: new Date(),\n//   onClose(selectedDates) {      \n//     userSelectedDate = selectedDates[0];    \n//     console.log(\"Обраний час:\", userSelectedDate);    \n//   },\n  \n// });\n\n\n// const button = document.querySelector(\"button\");\n// const input = document.querySelector(\"input\");\n\n// const handleClick = () => {\n//   console.log(\"The button was pressed and now the next image will appear\");\n// };\n\n// button.disabled = false;\n\n// button.addEventListener(\"click\", handleClick);\n\n// const fDays = document.querySelector(\"span[data-days]\");\n// const fHours = document.querySelector(\"span[data-hours]\");\n// const fMinutes = document.querySelector(\"span[data-minutes]\");\n// const fSeconds = document.querySelector(\"span[data-seconds]\");\n\n// class Timer {\n\n//   constructor({onTick}) {\n//     this.onTick = onTick;\n//     this.isActive = false;\n//     this.init(); \n//     this.intervalID = null;\n//   }\n\n//   init() {\n//     const ms = this.convertMs(0);\n//     this.onTick(ms);\n//   }\n//   start() {\n    \n//     if (this.isActive) {\n//       input.disabled = true;\n//       button.disabled = true;\n//       button.classList.add(\"disabled-button\");\n//       iziToast.error({\n//         title: 'Error',\n//         message: 'Please choose a date in the future',\n//       });\n      \n//       return;\n      \n//     }\n    // this.isActive = true;\n    // this.intervalID = setInterval(() => {\n    //   const currentTime = Date.now(); // Поточний час\n    //   const deltaTime = userSelectedDate - currentTime; // Скільки часу пройшло\n    //   if (deltaTime <= 0) {\n    //     clearInterval(this.intervalID); // зупинка відліку\n    //     this.init(); // скидання до 00        \n        //this.isActive = false; // активування кнопки для повторного запуску \n      //   return;\n      // }\n      // const time = this.convertMs(deltaTime) // вивидить час з відліком\n      // console.log(time); \n  //     this.onTick(time);\n\n  //   }, 1000)\n  // };  \n\n//   convertMs(ms) {  \n//     const second = 1000;\n//     const minute = second * 60;\n//     const hour = minute * 60;\n//     const day = hour * 24;\n    \n//     // Remaining days\n//     const days = Math.floor(ms / day);\n//     // Remaining hours\n//     const hours = Math.floor((ms % day) / hour);\n//     // Remaining minutes\n//     const minutes = Math.floor(((ms % day) % hour) / minute);\n//     // Remaining seconds\n//     const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n//     return {days, hours, minutes, seconds}\n//   }\n//   addLeadingZero(value) {\n//     return String(value).padStart(2, \"0\");\n//   }\n// }\n  \n// const time = new Timer({onTick: updateTimeFace});\n// button.addEventListener(\"click\", time.start.bind(time));\n\n// function updateTimeFace({ days, hours, minutes, seconds }) {\n//   fDays.textContent = `${days}`;\n//   fHours.textContent = `${hours}`;\n//   fMinutes.textContent = `${minutes}`;\n//   fSeconds.textContent = `${seconds}`;\n\n  \n// }"],"names":["userSelectedDate","flatpickr","selectedDates","iziToast","button","input","fDays","fHours","fMinutes","fSeconds","Timer","onTick","time","currentTime","deltaTime","ms","days","hours","minutes","seconds","value","updateTimeFace"],"mappings":"+IAKA,IAAIA,EAAmB,KAEvBC,EAAU,wBAAyB,CACjC,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,cAAe,GACf,QAAQC,EAAe,CAGrB,GAFAF,EAAmBE,EAAc,CAAC,EAE9BF,GAAoB,KAAK,MAAO,CAClCG,EAAS,MAAM,CACb,MAAO,QACP,QAAS,qCACT,SAAU,UAClB,CAAO,EACDC,EAAO,SAAW,GAClBA,EAAO,UAAU,IAAI,iBAAiB,EACtC,MACD,CACDA,EAAO,SAAW,GAClBA,EAAO,UAAU,OAAO,iBAAiB,CAC1C,CAEH,CAAC,EAED,MAAMA,EAAS,SAAS,cAAc,QAAQ,EACxCC,EAAQ,SAAS,cAAc,kBAAkB,EAEvDA,EAAM,SAAW,GACjBD,EAAO,SAAW,GAElB,MAAME,EAAQ,SAAS,cAAc,iBAAiB,EAChDC,EAAS,SAAS,cAAc,kBAAkB,EAClDC,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAW,SAAS,cAAc,oBAAoB,EAE5D,MAAMC,CAAM,CAEV,YAAY,CAAC,OAAAC,CAAM,EAAG,CACpB,KAAK,OAASA,EACd,KAAK,SAAW,GAChB,KAAK,KAAI,EACT,KAAK,WAAa,IACnB,CAED,MAAO,CACL,MAAMC,EAAO,KAAK,UAAU,CAAC,EAC7B,KAAK,OAAOA,CAAI,CACjB,CACD,OAAQ,CAEN,GAAI,KAAK,SAAU,CACjBR,EAAO,SAAW,GAClBC,EAAM,SAAW,GACjBD,EAAO,UAAU,IAAI,iBAAiB,EAEtC,MAED,CACD,KAAK,SAAW,GAChB,KAAK,WAAa,YAAY,IAAM,CAClCA,EAAO,SAAW,GAClBC,EAAM,SAAW,GACjBD,EAAO,UAAU,IAAI,iBAAiB,EACtC,MAAMS,EAAc,KAAK,MACnBC,EAAYd,EAAmBa,EACrC,GAAIC,GAAa,EAAG,CAClB,cAAc,KAAK,UAAU,EAC7B,KAAK,KAAI,EACT,KAAK,SAAW,GAChBV,EAAO,SAAW,GAClBC,EAAM,SAAW,GACjBD,EAAO,UAAU,OAAO,iBAAiB,EACzC,MACD,CACD,MAAMQ,EAAO,KAAK,UAAUE,CAAS,EACrC,KAAK,OAAOF,CAAI,CAEjB,EAAE,GAAI,CACR,CAED,UAAUG,EAAI,CAOZ,MAAMC,EAAO,KAAK,eAAe,KAAK,MAAMD,EAAK,KAAG,CAAC,EAE/CE,EAAQ,KAAK,eAAe,KAAK,MAAOF,EAAK,MAAO,IAAI,CAAC,EAEzDG,EAAU,KAAK,eAAe,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEtEI,EAAU,KAAK,eAAe,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EACvF,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CACD,eAAeC,EAAO,CACpB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACrC,CACH,CAEA,MAAMR,EAAO,IAAIF,EAAM,CAAC,OAAQW,CAAc,CAAC,EAC/CjB,EAAO,iBAAiB,QAASQ,EAAK,MAAM,KAAKA,CAAI,CAAC,EAGtD,SAASS,EAAe,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACzDb,EAAM,YAAc,GAAGU,CAAI,GAC3BT,EAAO,YAAc,GAAGU,CAAK,GAC7BT,EAAS,YAAc,GAAGU,CAAO,GACjCT,EAAS,YAAc,GAAGU,CAAO,EAGnC"}